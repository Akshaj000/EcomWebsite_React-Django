{"ast":null,"code":"var _jsxFileName = \"/mnt/1660E61660E5FC7D/AK360/REACT/Ecom/frontend/src/context/InvoiceContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from 'axios';\nimport { rooturl } from \"../utils/functions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst InvoiceContext = /*#__PURE__*/createContext();\nexport default InvoiceContext;\nexport const InvoiceProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  let [product, setProduct] = useState([]);\n  let [order, setOrder] = useState([]);\n  let [isfetched, setIsfetched] = useState(false);\n  const {\n    id\n  } = useParams();\n\n  let fetchInvoice = id => {\n    console.log(\"here\");\n    let token = JSON.parse(localStorage.getItem('authToken')).access;\n    let data;\n    axios.get(rooturl + '/api/order-detail/' + id + \"/\", {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(res => {\n      data = res.data;\n      setOrder(data);\n      axios.get(rooturl + '/api/product-detail/' + data.product + \"/\").then(res => {\n        setProduct(res.data);\n        setIsfetched(true);\n      });\n    });\n  };\n\n  let contextData = {\n    product: product,\n    order: order\n  };\n  useEffect(() => {\n    if (!isfetched) {\n      fetchInvoice(id);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(InvoiceContext.Provider, {\n    value: contextData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n\n_s(InvoiceProvider, \"zySSxzVHpINE/k4UdOudm+NOrbk=\", false, function () {\n  return [useParams];\n});\n\n_c = InvoiceProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"InvoiceProvider\");","map":{"version":3,"sources":["/mnt/1660E61660E5FC7D/AK360/REACT/Ecom/frontend/src/context/InvoiceContext.js"],"names":["createContext","useState","useEffect","useParams","axios","rooturl","InvoiceContext","InvoiceProvider","children","product","setProduct","order","setOrder","isfetched","setIsfetched","id","fetchInvoice","console","log","token","JSON","parse","localStorage","getItem","access","data","get","headers","then","res","contextData"],"mappings":";;;AAAA,SACAA,aADA,EAEAC,QAFA,EAGAC,SAHA,QAIO,OAJP;AAKA,SAASC,SAAT,QAA0B,kBAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,oBAAxB;;AAEA,MAAMC,cAAc,gBAAGN,aAAa,EAApC;AACA,eAAeM,cAAf;AAEA,OAAQ,MAAMC,eAAe,GAAG,QAAgB;AAAA;;AAAA,MAAf;AAACC,IAAAA;AAAD,GAAe;AAE5C,MAAI,CAACC,OAAD,EAAUC,UAAV,IAAwBT,QAAQ,CAAC,EAAD,CAApC;AACA,MAAI,CAACU,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,EAAD,CAAhC;AACA,MAAI,CAACY,SAAD,EAAWC,YAAX,IAA2Bb,QAAQ,CAAC,KAAD,CAAvC;AACA,QAAM;AAAEc,IAAAA;AAAF,MAASZ,SAAS,EAAxB;;AAGA,MAAIa,YAAY,GAAED,EAAD,IAAM;AACnBE,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,QAAIC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,EAA8CC,MAA1D;AACA,QAAIC,IAAJ;AACArB,IAAAA,KAAK,CAACsB,GAAN,CAAUrB,OAAO,GAAC,oBAAR,GAA6BU,EAA7B,GAAgC,GAA1C,EAA8C;AAC1CY,MAAAA,OAAO,EAAC;AACJ,yBAAiB,UAASR,KAAM;AAD5B;AADkC,KAA9C,EAKCS,IALD,CAKMC,GAAG,IAAI;AACTJ,MAAAA,IAAI,GAAGI,GAAG,CAACJ,IAAX;AACAb,MAAAA,QAAQ,CAACa,IAAD,CAAR;AACArB,MAAAA,KAAK,CAACsB,GAAN,CAAUrB,OAAO,GAAC,sBAAR,GAA+BoB,IAAI,CAAChB,OAApC,GAA4C,GAAtD,EACCmB,IADD,CACMC,GAAG,IAAI;AACTnB,QAAAA,UAAU,CAACmB,GAAG,CAACJ,IAAL,CAAV;AACAX,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACH,OAJD;AAKH,KAbD;AAcH,GAlBD;;AAoBA,MAAIgB,WAAW,GAAE;AACbrB,IAAAA,OAAO,EAACA,OADK;AAEbE,IAAAA,KAAK,EAACA;AAFO,GAAjB;AAKAT,EAAAA,SAAS,CAAC,MAAI;AACV,QAAG,CAACW,SAAJ,EAAc;AACVG,MAAAA,YAAY,CAACD,EAAD,CAAZ;AACH;AAEJ,GALQ,CAAT;AAQA,sBACI,QAAC,cAAD,CAAgB,QAAhB;AAAyB,IAAA,KAAK,EAAEe,WAAhC;AAAA,cACKtB;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH,CA9CO;;GAAMD,e;UAKKJ,S;;;KALLI,e","sourcesContent":["import { \ncreateContext,     \nuseState,\nuseEffect,\n} from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from 'axios';\nimport { rooturl } from \"../utils/functions\";\n\nconst InvoiceContext = createContext()\nexport default InvoiceContext;\n\nexport  const InvoiceProvider = ({children}) => {\n\n    let [product, setProduct] = useState([]);\n    let [order, setOrder] = useState([]);\n    let [isfetched,setIsfetched] = useState(false)\n    const { id } = useParams();\n    \n\n    let fetchInvoice=(id)=>{\n        console.log(\"here\")\n        let token = JSON.parse(localStorage.getItem('authToken')).access\n        let data;\n        axios.get(rooturl+'/api/order-detail/'+id+\"/\",{\n            headers:{\n                'Authorization':`Bearer ${token}`\n            }\n        })\n        .then(res => {\n            data = res.data;\n            setOrder(data)\n            axios.get(rooturl+'/api/product-detail/'+data.product+\"/\")\n            .then(res => {\n                setProduct(res.data)\n                setIsfetched(true)\n            })\n        })\n    }\n\n    let contextData ={\n        product:product,\n        order:order,\n    }\n\n    useEffect(()=>{\n        if(!isfetched){\n            fetchInvoice(id)\n        }\n\n    })\n\n\n    return(\n        <InvoiceContext.Provider value={contextData}>\n            {children}\n        </InvoiceContext.Provider>\n    )\n}"]},"metadata":{},"sourceType":"module"}